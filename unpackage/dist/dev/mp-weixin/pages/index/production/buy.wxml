<view class="contain"><view class="header"><block wx:if="{{groupItem.groupNo&&!chooseAddress}}"><view class="warn_message"><text>您当前没有添加收货地址，请完善收货地址后再下单</text></view></block></view><view class="content"><block wx:if="{{groupItem.groupNo}}"><view class="address"><block wx:if="{{addressList.length==0}}"><view data-event-opts="{{[['tap',[['routeAddress',['$event']]]]]}}" class="none" bindtap="__e"><image src="/static/icon/add@2x.png"></image><text>手动添加收货地址</text><u-icon vue-id="3e399940-1" name="arrow-right" size="24" bind:__l="__l"></u-icon></view></block><block wx:else><view data-event-opts="{{[['tap',[['routeAddress',['$event']]]]]}}" class="address_detail" bindtap="__e"><u-icon vue-id="3e399940-2" name="/static/icon/local@2x.png" size="40" bind:__l="__l"></u-icon><view class="detail_text"><text class="name">{{chooseAddress.receiverName+" "+chooseAddress.receiverPhone}}</text><text>{{chooseAddress.receiverProvince+" "+chooseAddress.receiverCity+"\n\t\t\t\t\t\t"+chooseAddress.receiverArea+" "+chooseAddress.receiverAddress}}</text></view><u-icon vue-id="3e399940-3" name="arrow-right" size="30" bind:__l="__l"></u-icon></view></block></view></block><view class="prod_detail"><image class="prod_img" src="{{detail.picture}}" mode="aspectFill"></image><view class="detail_text"><view class="title"><text class="u-line-2">{{detail.productName}}</text></view><view class="price"><text>{{detail.groupPrice+"积分"}}</text></view><view class="num"><text>数量：1</text></view></view></view><view class="block_item"><view class="title"><text>说明</text></view><view class="value"><block wx:if="{{!groupItem.groupNo}}"><text>{{"该商品开团需开团券"+detail.openGroupCoupon+"张"}}</text></block><block wx:else><text>{{"该商品开团需拼团积分"+detail.groupPrice}}</text></block></view></view><block wx:if="{{!groupItem.groupNo}}"><view class="pay_method"><view class="block_item"><view class="title"><image src="/static/icon/coupon.png"></image><text>开团券</text></view><view class="value value_gray"><text>已开启抵扣</text></view></view><view class="coupon_num"><text>{{"剩余："+userInfo.account.accountAvailableCoupon+"张"}}</text><text class="message">{{"当前最大可抵扣"+userInfo.account.accountAvailableCoupon+"张"}}</text><u-switch vue-id="3e399940-4" size="36" active-color="#532DA3" value="{{couponChecked}}" data-event-opts="{{[['^change',[['switchChange']]],['^input',[['__set_model',['','couponChecked','$event',[]]]]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l"></u-switch></view></view></block><block wx:else><view class="pay_method"><view class="block_item"><view class="title"><image src="/static/icon/integral-icon@2x.png"></image><text>拼团积分</text></view><view class="value value_gray"><text>已开启抵扣</text></view></view><view class="coupon_num"><text>{{"剩余："+userInfo.account.accountAvailableIntegral}}</text><u-switch vue-id="3e399940-5" size="36" active-color="#532DA3" value="{{couponChecked}}" data-event-opts="{{[['^change',[['switchChange']]],['^input',[['__set_model',['','couponChecked','$event',[]]]]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l"></u-switch></view></view></block></view><view class="footer"><block wx:if="{{groupItem.groupNo&&detail.groupPrice>userInfo.account.accountAvailableIntegral}}"><view class="warn_message"><text>客官您好，您当前积分不足，暂不可参团。</text></view></block><block wx:if="{{false}}"><view class="handle"><text>还需抵开团券1张</text><block wx:if="{{true}}"><button class="btn" disabled="true" type="default">立即开团</button></block><block wx:else><button class="btn open" disabled="true" type="default">立即开团</button></block></view></block><block wx:else><view class="handle"><text></text><block wx:if="{{groupItem.groupNo}}"><button class="btn open" type="default" data-event-opts="{{[['tap',[['wxPay',['join']]]]]}}" catchtap="__e">支付</button></block><block wx:else><button class="btn open" type="default" data-event-opts="{{[['tap',[['wxPay',['open']]]]]}}" catchtap="__e">立即开团</button></block><u-popup bind:input="__e" vue-id="3e399940-6" mode="center" border-radius="12" width="526rpx" height="690rpx" value="{{payResult}}" data-event-opts="{{[['^input',[['__set_model',['','payResult','$event',[]]]]]]}}" bind:__l="__l" vue-slots="{{['default']}}"><view class="pay_result"><view class="result_top"><u-icon vue-id="{{('3e399940-7')+','+('3e399940-6')}}" name="checkmark-circle" size="60" color="#532DA3" bind:__l="__l"></u-icon><view class="result_text"><text>支付成功</text></view><view class="result_price"><block wx:if="{{groupItem.groupNo}}"><text>{{"积分抵扣 -"+detail.groupPrice}}</text></block><block wx:else><text>{{"开团券抵扣 -"+detail.openGroupCoupon}}</text></block></view></view><view class="result_bottom" style="text-align:center;"><text>{{second+"s 进入拼团房间"}}</text><view data-event-opts="{{[['tap',[['routeHouse',['$0'],['groupItem.groupNo']]]]]}}" style="margin-top:40rpx;" bindtap="__e">立即进入</view></view></view></u-popup></view></block></view></view>