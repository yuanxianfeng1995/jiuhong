{"version":3,"sources":["webpack:///D:/jiuhong/components/zy-upgrade/zy-upgrade.vue?d80b","webpack:///D:/jiuhong/components/zy-upgrade/zy-upgrade.vue?c589","webpack:///D:/jiuhong/components/zy-upgrade/zy-upgrade.vue?4844","webpack:///D:/jiuhong/components/zy-upgrade/zy-upgrade.vue?39c8","uni-app:///components/zy-upgrade/zy-upgrade.vue","webpack:///D:/jiuhong/components/zy-upgrade/zy-upgrade.vue?e000","webpack:///D:/jiuhong/components/zy-upgrade/zy-upgrade.vue?e721"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACqC;;;AAG9F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAomB,CAAgB,8nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqCxnB;AACA,mBADA;AAEA;AACA;AACA,kBADA;AAEA,sBAFA,EADA;;AAKA;AACA,kBADA;AAEA,iBAFA,EALA;;AASA;AACA,mBADA;AAEA,oBAFA,EATA;;AAaA;AACA,kBADA;AAEA,iBAFA,EAbA;;AAiBA;AACA,kBADA;AAEA,gBAFA,EAjBA;;AAqBA;AACA,mBADA;AAEA,oBAFA,EArBA;;AAyBA;AACA,mBADA;AAEA,oBAFA,EAzBA;;AA6BA;AACA,mBADA;AAEA,oBAFA,EA7BA,EAFA;;;AAoCA,MApCA,kBAoCA;AACA;AACA,wBADA,EACA;AACA,kBAFA;AAGA,uBAHA;AAIA,sBAJA;AAKA,yBALA;AAMA,qBANA;AAOA,qBAPA;AAQA,yBARA;AASA,qCATA;AAUA,qBAVA;AAWA,8BAXA;AAYA,iBAZA;AAaA,iBAbA;AAcA,aAdA,CAcA;AAdA;AAgBA,GArDA;AAsDA,SAtDA,qBAsDA;AACA;;;;AAIA;AACA;AACA;AACA;AACA,GA/DA;AAgEA;AACA,WADA,qBACA;AACA;AACA;AACA;AACA,KALA,EAhEA;;AAuEA;AACA;AACA,gBAFA,0BAEA;AACA;;;;;;;;;;;;;;;AAeA,KAlBA;AAmBA;AACA;AACA,iBADA;AAEA,mBAFA;;AAIA;AACA;AACA,yBADA;AAEA,oCAFA;AAGA,8BAHA;AAIA,8BAJA;AAKA,gCALA;AAMA,sBANA;AAOA,mBAPA;AAQA,0BARA;;AAUA;AACA,2BADA;AAEA;AACA;AACA,+DADA,EAHA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA,CACA;AACA,mDAFA,CAEA;AACA,oCAHA,CAGA;AACA,uDAJA,CAIA;AACA;AACA,uDANA,CAMA;AACA;AACA;AACA;AACA,aAVA,MAUA;AACA;AACA;AACA;AACA;AACA;AACA,WA7BA,MA6BA;AACA;AACA,yCADA;AAEA,0BAFA;;AAIA;AACA,SA5CA;;AA8CA,KAjFA;AAkFA;AACA;AACA;AACA;AACA,KAtFA;AAuFA;AACA;AACA;AACA,KA1FA;AA2FA;AACA;AACA;AACA;AACA,KA/FA;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCADA;AAEA;AACA;AACA,iCADA;AAEA,wBAFA;;AAIA,SAPA;AAQA,OAZA,MAYA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA;AACA;AACA;AACA;AACA,4BADA;AAEA;AACA;AACA;AACA,eALA,EAKA;AACA;AACA;AACA,+BADA;AAEA,8BAFA;;AAIA,eAXA;AAYA,aAdA,MAcA;AACA;AACA,kCADA;AAEA,4BAFA;;AAIA;AACA,WAvBA;AAwBA;AACA;AACA;AACA,uCADA;AAEA,0BAFA;;AAIA;AACA,WA/BA;AAgCA;AACA,WAjCA;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAXA;AAYA;AACA,KArKA,EAvEA,E;;;;;;;;;;;;;ACrCA;AAAA;AAAA;AAAA;AAA84B,CAAgB,+4BAAG,EAAC,C;;;;;;;;;;;ACAl6B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/zy-upgrade/zy-upgrade.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./zy-upgrade.vue?vue&type=template&id=095821f8&scoped=true&\"\nvar renderjs\nimport script from \"./zy-upgrade.vue?vue&type=script&lang=js&\"\nexport * from \"./zy-upgrade.vue?vue&type=script&lang=js&\"\nimport style0 from \"./zy-upgrade.vue?vue&type=style&index=0&id=095821f8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"095821f8\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/zy-upgrade/zy-upgrade.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zy-upgrade.vue?vue&type=template&id=095821f8&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zy-upgrade.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zy-upgrade.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"zy-modal\" :class=\"dshow?'show':''\">\n\t\t<view class=\"zy-dialog\" style=\"background-color: transparent;\">\n\t\t\t<view class=\"padding-top text-white\" :class=\"'zy-upgrade-topbg-'+theme\">\n\t\t\t\t<view>\n\t\t\t\t\t<text class=\"zy-upgrade-title\">\n\t\t\t\t\t\t发现新版本\n\t\t\t\t\t</text>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"flex-wrap\">{{version}}</text>\n\t\t\t</view>\n\t\t\t<view class=\"padding-xl bg-white text-left\">\n\t\t\t\t<scroll-view style=\"max-height: 200rpx;\" scroll-y=\"auto\" v-if=\"!update_flag\">\n\t\t\t\t\t<text>{{update_tips}}</text>\n\t\t\t\t</scroll-view>\n\t\t\t\t<view class=\"zy-progress radius striped active\" v-if=\"update_flag\">\n\t\t\t\t\t<view :class=\"'bg-'+theme\" :style=\"'width: '+update_process+'%;'\">\n\t\t\t\t\t\t{{update_process}}\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"zy-bar bg-white justify-end\">\n\t\t\t\t<view class=\"action\" v-if=\"!update_flag\">\n\t\t\t\t\t<button class=\"zy-btn\" :class=\"'bg-'+theme\" @click=\"upgrade_checked\">确认升级</button>\n\t\t\t\t\t<button class=\"zy-btn margin-left\" :class=\"'line-'+theme\"\n\t\t\t\t\tv-if=\"!forceupgrade\"\n\t\t\t\t\t @click=\"upgrade_cancel\">取消升级</button>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"action text-center\" v-if=\"update_flag&&!forceupgrade\">\n\t\t\t\t\t<button class=\"zy-btn\" :class=\"'bg-'+theme\" @click=\"upgrade_break\">中断升级</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tname: 'ZyUpgrade',\n\t\tprops: {\n\t\t\ttheme: {\t//主题，目前支持green,pink,blue,yellow,red\n\t\t\t\ttype: String,\n\t\t\t\tdefault: 'green'\n\t\t\t},\n\t\t\tupdateurl: {\t//升级检测url，全路径\n\t\t\t\ttype:String,\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\th5preview:{\t//H5界面下是否预览升级\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: false\n\t\t\t},\n\t\t\toldversion: {\t//如果是H5，为了方便测试，可以传入一个旧版本号进来。\n\t\t\t\ttype: String,\n\t\t\t\tdefault: ''\n\t\t\t},\n\t\t\toldcode: { //如果是H5，为了方便测试，可以传一个旧版本的code进来。\n\t\t\t\ttype: Number,\n\t\t\t\tdefault: 0\n\t\t\t},\n\t\t\tappstoreflag: {\t//是否启用appstore升级，如果启用，由服务端返回appstore的地址\n\t\t\t\ttype: Boolean,\n\t\t\t\tdefault: false\n\t\t\t},\n\t\t\tnoticeflag:{\t//是否通知主界面无需更新\n\t\t\t\ttype:Boolean,\n\t\t\t\tdefault: false\n\t\t\t},\n\t\t\tautocheckupdate:{\t//是否页面截入时就判断升级\n\t\t\t\ttype:Boolean,\n\t\t\t\tdefault: false\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tupdate_flag: false, //点击升级按钮后，显示进度条\n\t\t\t\tdshow: false,\n\t\t\t\tupdate_process: 0,\n\t\t\t\tdownloadTask: [],\n\t\t\t\tupdated2version: '',\n\t\t\t\tversion_url: '',\n\t\t\t\tupdate_tips: '',\n\t\t\t\tforceupgrade: false,\n\t\t\t\tcurrentversion: this.oldversion,\n\t\t\t\tversionname: '',\n\t\t\t\tvesioncode: this.oldcode,\n\t\t\t\twgt_flag: 0,\n\t\t\t\twgt_url: '',\n\t\t\t\tsize: 0 ,//开启gzip等情形下，获取不到安装包大小，可以服务端返回安装包大小\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tlet app_flag = false\n\t\t\t// #ifdef APP-PLUS\n\t\t\tapp_flag = true\n\t\t\t// #endif\n\t\t\tif((this.h5preview || app_flag) && this.autocheckupdate){\n\t\t\t\tconsole.log(\"检测升级\")\n\t\t\t\tthis.check_update() \n\t\t\t}\n\t\t},\n\t\tcomputed:{\n\t\t\tversion(){\n\t\t\t\tlet retversion = ''\n\t\t\t\tretversion = this.currentversion + (this.currentversion!=''&&this.updated2version!=''?'->':'')+this.updated2version\n\t\t\t\treturn retversion\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\t//检测升级\n\t\t\tcheck_update(){\n\t\t\t\tlet that = this\n\t\t\t\t// #ifdef APP-PLUS\n\t\t\t\tplus.runtime.getProperty(plus.runtime.appid, function(widgetInfo) { \n\t\t\t\t\tthat.currentversion = widgetInfo.version\n\t\t\t\t\tthat.versionname = widgetInfo.name\n\t\t\t\t\tthat.versioncode = widgetInfo.versionCode\n\t\t\t\t\tthat.updatebusiness(that)\n\t\t\t\t});  \n\t\t\t\t// #endif\n\t\t\t\t// #ifdef H5\n\t\t\t\tif(this.h5preview){\n\t\t\t\t\tthis.updatebusiness(that)\n\t\t\t\t}\n\t\t\t\t// #endif\n\t\t\t\t\n\t\t\t},\n\t\t\tupdatebusiness: function(that){ //具体升级的业务逻辑\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tmask: false\n\t\t\t\t});\n\t\t\t\tlet platform = uni.getSystemInfoSync().platform\n\t\t\t\tlet formdata = {\n\t\t\t\t\tmethod: \"upgrade\",\n\t\t\t\t\tversion: that.currentversion,  \n\t\t\t\t\tname: that.versionname,\n\t\t\t\t\tcode: that.versioncode,\n\t\t\t\t\tts:(new Date()).valueOf(),\n\t\t\t\t\ttransid:'123',\n\t\t\t\t\tsign:'123',\n\t\t\t\t\tplatform: platform\n\t\t\t\t}\n\t\t\t\tuni.request({  \n\t\t\t\t\turl: that.updateurl,  \n\t\t\t\t\t// data: formdata,\n\t\t\t\t\theader:{\n\t\t\t\t\t\tAuthorization:'Bearer' + uni.getStorageSync('token')\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (result) => {\n\t\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\tlet data = result.data\n\t\t\t\t\t\tif(data.code == 200){\n\t\t\t\t\t\t\tconsole.log('当前版本2',that.currentversion)\n\t\t\t\t\t\t\tconsole.log('获取升级2',data) \n\t\t\t\t\t\t\t//判断是否升级\n\t\t\t\t\t\t\tlet nowVersion = that.currentversion.replace(/\\./g,'')\n\t\t\t\t\t\t\tlet newVersion = data.data.version.replace(/\\./g,'')\n\t\t\t\t\t\t\tconsole.log('检查版本2',nowVersion,newVersion)\n\t\t\t\t\t\t\tlet update_flag = 0\n\t\t\t\t\t\t\tif( nowVersion < newVersion && nowVersion >= 111 ){\n\t\t\t\t\t\t\t\tconsole.log('需要升级')\n\t\t\t\t\t\t\t\tupdate_flag = 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//提示升级\n\t\t\t\t\t\t\tif(update_flag == 1){ //0不需要升级，1 需要升级\n\t\t\t\t\t\t\t\tthat.dshow = true //是否显示升级\n\t\t\t\t\t\t\t\tthat.update_tips = data.data.content //升级说明，不用我提醒大家换行应该用\\n 了吧？\n\t\t\t\t\t\t\t\tthat.forceupgrade =  1 //0不强制，1 强制升级（这个字段以后可能会优化到 update_flag 里）\n\t\t\t\t\t\t\t\tthat.version_url = data.data.downloadUrl //升级安装包或 appstore 地址，注意是全路径\n\t\t\t\t\t\t\t\t//that.currentversion = widgetInfo.version\n\t\t\t\t\t\t\t\tthat.updated2version = data.data.version //当前最新的版本。\n\t\t\t\t\t\t\t\tthat.wgt_flag = data.data.wgt_flag\n\t\t\t\t\t\t\t\tthat.wgt_url = data.data.wgt_url\n\t\t\t\t\t\t\t\tthat.size = data.data.size\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tif(that.noticeflag){\n\t\t\t\t\t\t\t\t\t//通知父组件，当前版为最新版本\n\t\t\t\t\t\t\t\t\tthat.$emit(\"showupdateTips\",0)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '请求升级出错：'+data.msg,\n\t\t\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}  \n\t\t\t\t});  \n\t\t\t},\n\t\t\t//点击开始升级按钮，开始升级\n\t\t\tupgrade_checked:function(){\n\t\t\t\tthis.update_flag = true\n\t\t\t\tthis.updateversion()\n\t\t\t},\n\t\t\t//点击取消升级按钮，取消升级\n\t\t\tupgrade_cancel:function(){\n\t\t\t\tthis.dshow = false\n\t\t\t},\n\t\t\t//升级过程中，点击中断升级按钮，中断升级\n\t\t\tupgrade_break: function(){\n\t\t\t\tthis.downloadTask.abort()\n\t\t\t\tthis.update_flag = false\n\t\t\t},\n\t\t\t//升级下载apk安装包的具体处理业务逻辑\n\t\t\tupdateversion: function(){\n\t\t\t\tlet platform = uni.getSystemInfoSync().platform\n\t\t\t\tlet that = this\n\t\t\t\tconsole.log(\"操作系统：\",platform)\n\t\t\t\tif(platform == 'ios' && this.appstoreflag){\n\t\t\t\t\t//如果启用ios appstore升级，则打开appstore\n\t\t\t\t\tthat.dshow = false\n\t\t\t\t\tconsole.log(\"跳转至appstore\")\n\t\t\t\t\tplus.runtime.launchApplication({\n\t\t\t\t\t    action: that.version_url\n\t\t\t\t\t}, function(e) {\n\t\t\t\t\t    uni.showToast({\n\t\t\t\t\t    \ttitle: '打开appstore失败',\n\t\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t    });\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tlet that = this\n\t\t\t\t\tlet downloadurl = that.wgt_flag==1?that.wgt_url:that.version_url\n\t\t\t\t\tthis.update_confirm = true\n\t\t\t\t\tthis.downloadTask = uni.downloadFile({\n\t\t\t\t\t\turl: downloadurl,\n\t\t\t\t\t\tsuccess:function(res){\n\t\t\t\t\t\t\tif(res.statusCode == 200){\n\t\t\t\t\t\t\t\t//开始安装\n\t\t\t\t\t\t\t\tplus.runtime.install(res.tempFilePath, {\n\t\t\t\t\t\t\t\t\tforce: false  \n\t\t\t\t\t\t\t\t}, function() {  \n\t\t\t\t\t\t\t\t\tconsole.log('install success...');\n\t\t\t\t\t\t\t\t\tplus.runtime.restart();\n\t\t\t\t\t\t\t\t}, function(e) {  \n\t\t\t\t\t\t\t\t\tconsole.error('install fail...',e);  \n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '升级失败',\n\t\t\t\t\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});  \n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '下载失败，网络错误',\n\t\t\t\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail:function(e) {\n\t\t\t\t\t\t\tconsole.log(\"下载失败\",e)\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '下载失败:'+e.errMsg,\n\t\t\t\t\t\t\t\ticon:'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.update_flag = false\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomplete:function(){\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tthis.downloadTask.onProgressUpdate(function(res){\n\t\t\t\t\t\tthat.update_process = res.progress\n\t\t\t\t\t\tif(res.progress == Infinity){\n\t\t\t\t\t\t\t//使用size计算\n\t\t\t\t\t\t\tconsole.log(\"计算size\");\n\t\t\t\t\t\t\tlet progress = (res.totalBytesWritten / that.size)*100\n\t\t\t\t\t\t\tif(progress>100){\n\t\t\t\t\t\t\t\tprogress = 100\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthat.update_process = progress\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t@import url(\"static/css/main.css\");\n\t.zy-upgrade-topbg-green {\n\t\tbackground-image: url('static/images/green.png');\n\t\tbackground-size: 100% 100%;\n\t\tbackground-repeat: no-repeat;\n\t\theight: 290rpx;\n\t}\n\t.zy-upgrade-topbg-red {\n\t\tbackground-image: url('static/images/red.png');\n\t\tbackground-size: 100% 100%;\n\t\tbackground-repeat: no-repeat;\n\t\theight: 290rpx;\n\t}\n\t.zy-upgrade-topbg-pink {\n\t\tbackground-image: url('static/images/pink.png');\n\t\tbackground-size: 100% 100%;\n\t\tbackground-repeat: no-repeat;\n\t\theight: 290rpx;\n\t}\n\t.zy-upgrade-topbg-yellow {\n\t\tbackground-image: url('static/images/yellow.png');\n\t\tbackground-size: 100% 100%;\n\t\tbackground-repeat: no-repeat;\n\t\theight: 290rpx;\n\t}\n\t.zy-upgrade-topbg-blue {\n\t\tbackground-image: url('static/images/blue.png');\n\t\tbackground-size: 100% 100%;\n\t\tbackground-repeat: no-repeat;\n\t\theight: 290rpx;\n\t}\n\t.zy-upgrade-title {\n\t\tfont-size: 50rpx;\n\t\tcolor: white;\n\t}\n</style>\n","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zy-upgrade.vue?vue&type=style&index=0&id=095821f8&scoped=true&lang=css&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zy-upgrade.vue?vue&type=style&index=0&id=095821f8&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1626182057329\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}