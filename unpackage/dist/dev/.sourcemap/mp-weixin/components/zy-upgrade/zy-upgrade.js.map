{"version":3,"sources":["webpack:///D:/下载/玖红天下项目交付文件（客户端、后台PC端）/客户端/Famous-product-shop-app/components/zy-upgrade/zy-upgrade.vue?a6da","webpack:///D:/下载/玖红天下项目交付文件（客户端、后台PC端）/客户端/Famous-product-shop-app/components/zy-upgrade/zy-upgrade.vue?3af8","webpack:///D:/下载/玖红天下项目交付文件（客户端、后台PC端）/客户端/Famous-product-shop-app/components/zy-upgrade/zy-upgrade.vue?4068","webpack:///D:/下载/玖红天下项目交付文件（客户端、后台PC端）/客户端/Famous-product-shop-app/components/zy-upgrade/zy-upgrade.vue?acb2","uni-app:///components/zy-upgrade/zy-upgrade.vue","webpack:///D:/下载/玖红天下项目交付文件（客户端、后台PC端）/客户端/Famous-product-shop-app/components/zy-upgrade/zy-upgrade.vue?eacd","webpack:///D:/下载/玖红天下项目交付文件（客户端、后台PC端）/客户端/Famous-product-shop-app/components/zy-upgrade/zy-upgrade.vue?af21"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACqC;;;AAG9F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAomB,CAAgB,8nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqCxnB;AACA,mBADA;AAEA;AACA;AACA,kBADA;AAEA,sBAFA,EADA;;AAKA;AACA,kBADA;AAEA,iBAFA,EALA;;AASA;AACA,mBADA;AAEA,oBAFA,EATA;;AAaA;AACA,kBADA;AAEA,iBAFA,EAbA;;AAiBA;AACA,kBADA;AAEA,gBAFA,EAjBA;;AAqBA;AACA,mBADA;AAEA,oBAFA,EArBA;;AAyBA;AACA,mBADA;AAEA,oBAFA,EAzBA;;AA6BA;AACA,mBADA;AAEA,oBAFA,EA7BA,EAFA;;;AAoCA,MApCA,kBAoCA;AACA;AACA,wBADA,EACA;AACA,kBAFA;AAGA,uBAHA;AAIA,sBAJA;AAKA,yBALA;AAMA,qBANA;AAOA,qBAPA;AAQA,yBARA;AASA,qCATA;AAUA,qBAVA;AAWA,8BAXA;AAYA,iBAZA;AAaA,iBAbA;AAcA,aAdA,CAcA;AAdA;AAgBA,GArDA;AAsDA,SAtDA,qBAsDA;AACA;;;;AAIA;AACA;AACA;AACA;AACA,GA/DA;AAgEA;AACA,WADA,qBACA;AACA;AACA;AACA;AACA,KALA,EAhEA;;AAuEA;AACA;AACA,gBAFA,0BAEA;AACA;;;;;;;;;;;;;;;AAeA,KAlBA;AAmBA;AACA;AACA,iBADA;AAEA,mBAFA;;AAIA;AACA;AACA,yBADA;AAEA,oCAFA;AAGA,8BAHA;AAIA,8BAJA;AAKA,gCALA;AAMA,sBANA;AAOA,mBAPA;AAQA,0BARA;;AAUA;AACA,2BADA;AAEA;AACA;AACA,+DADA,EAHA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA,CACA;AACA,mDAFA,CAEA;AACA,oCAHA,CAGA;AACA,uDAJA,CAIA;AACA;AACA,uDANA,CAMA;AACA;AACA;AACA;AACA,aAVA,MAUA;AACA;AACA;AACA;AACA;AACA;AACA,WA7BA,MA6BA;AACA;AACA,yCADA;AAEA,0BAFA;;AAIA;AACA,SA5CA;;AA8CA,KAjFA;AAkFA;AACA;AACA;AACA;AACA,KAtFA;AAuFA;AACA;AACA;AACA,KA1FA;AA2FA;AACA;AACA;AACA;AACA,KA/FA;AAgGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCADA;AAEA;AACA;AACA,iCADA;AAEA,wBAFA;;AAIA,SAPA;AAQA,OAZA,MAYA;AACA;AACA;AACA;AACA;AACA,0BADA;AAEA;AACA;AACA;AACA;AACA,4BADA;AAEA;AACA;AACA;AACA,eALA,EAKA;AACA;AACA;AACA,+BADA;AAEA,8BAFA;;AAIA,eAXA;AAYA,aAdA,MAcA;AACA;AACA,kCADA;AAEA,4BAFA;;AAIA;AACA,WAvBA;AAwBA;AACA;AACA;AACA,uCADA;AAEA,0BAFA;;AAIA;AACA,WA/BA;AAgCA;AACA,WAjCA;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAXA;AAYA;AACA,KArKA,EAvEA,E;;;;;;;;;;;;;ACrCA;AAAA;AAAA;AAAA;AAA84B,CAAgB,+4BAAG,EAAC,C;;;;;;;;;;;ACAl6B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/zy-upgrade/zy-upgrade.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./zy-upgrade.vue?vue&type=template&id=095821f8&scoped=true&\"\nvar renderjs\nimport script from \"./zy-upgrade.vue?vue&type=script&lang=js&\"\nexport * from \"./zy-upgrade.vue?vue&type=script&lang=js&\"\nimport style0 from \"./zy-upgrade.vue?vue&type=style&index=0&id=095821f8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"095821f8\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/zy-upgrade/zy-upgrade.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zy-upgrade.vue?vue&type=template&id=095821f8&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zy-upgrade.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zy-upgrade.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"zy-modal\" :class=\"dshow?'show':''\">\r\n\t\t<view class=\"zy-dialog\" style=\"background-color: transparent;\">\r\n\t\t\t<view class=\"padding-top text-white\" :class=\"'zy-upgrade-topbg-'+theme\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<text class=\"zy-upgrade-title\">\r\n\t\t\t\t\t\t发现新版本\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"flex-wrap\">{{version}}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"padding-xl bg-white text-left\">\r\n\t\t\t\t<scroll-view style=\"max-height: 200rpx;\" scroll-y=\"auto\" v-if=\"!update_flag\">\r\n\t\t\t\t\t<text>{{update_tips}}</text>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<view class=\"zy-progress radius striped active\" v-if=\"update_flag\">\r\n\t\t\t\t\t<view :class=\"'bg-'+theme\" :style=\"'width: '+update_process+'%;'\">\r\n\t\t\t\t\t\t{{update_process}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"zy-bar bg-white justify-end\">\r\n\t\t\t\t<view class=\"action\" v-if=\"!update_flag\">\r\n\t\t\t\t\t<button class=\"zy-btn\" :class=\"'bg-'+theme\" @click=\"upgrade_checked\">确认升级</button>\r\n\t\t\t\t\t<button class=\"zy-btn margin-left\" :class=\"'line-'+theme\"\r\n\t\t\t\t\tv-if=\"!forceupgrade\"\r\n\t\t\t\t\t @click=\"upgrade_cancel\">取消升级</button>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action text-center\" v-if=\"update_flag&&!forceupgrade\">\r\n\t\t\t\t\t<button class=\"zy-btn\" :class=\"'bg-'+theme\" @click=\"upgrade_break\">中断升级</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\n</template>\n\n<script>\r\n\texport default {\r\n\t\tname: 'ZyUpgrade',\r\n\t\tprops: {\r\n\t\t\ttheme: {\t//主题，目前支持green,pink,blue,yellow,red\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'green'\r\n\t\t\t},\r\n\t\t\tupdateurl: {\t//升级检测url，全路径\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\th5preview:{\t//H5界面下是否预览升级\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\toldversion: {\t//如果是H5，为了方便测试，可以传入一个旧版本号进来。\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\r\n\t\t\toldcode: { //如果是H5，为了方便测试，可以传一个旧版本的code进来。\r\n\t\t\t\ttype: Number,\r\n\t\t\t\tdefault: 0\r\n\t\t\t},\r\n\t\t\tappstoreflag: {\t//是否启用appstore升级，如果启用，由服务端返回appstore的地址\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tnoticeflag:{\t//是否通知主界面无需更新\r\n\t\t\t\ttype:Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\tautocheckupdate:{\t//是否页面截入时就判断升级\r\n\t\t\t\ttype:Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tupdate_flag: false, //点击升级按钮后，显示进度条\r\n\t\t\t\tdshow: false,\r\n\t\t\t\tupdate_process: 0,\r\n\t\t\t\tdownloadTask: [],\r\n\t\t\t\tupdated2version: '',\r\n\t\t\t\tversion_url: '',\r\n\t\t\t\tupdate_tips: '',\r\n\t\t\t\tforceupgrade: false,\r\n\t\t\t\tcurrentversion: this.oldversion,\r\n\t\t\t\tversionname: '',\r\n\t\t\t\tvesioncode: this.oldcode,\r\n\t\t\t\twgt_flag: 0,\r\n\t\t\t\twgt_url: '',\r\n\t\t\t\tsize: 0 ,//开启gzip等情形下，获取不到安装包大小，可以服务端返回安装包大小\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tlet app_flag = false\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tapp_flag = true\r\n\t\t\t// #endif\r\n\t\t\tif((this.h5preview || app_flag) && this.autocheckupdate){\r\n\t\t\t\tconsole.log(\"检测升级\")\r\n\t\t\t\tthis.check_update() \r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\tversion(){\r\n\t\t\t\tlet retversion = ''\r\n\t\t\t\tretversion = this.currentversion + (this.currentversion!=''&&this.updated2version!=''?'->':'')+this.updated2version\r\n\t\t\t\treturn retversion\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t//检测升级\r\n\t\t\tcheck_update(){\r\n\t\t\t\tlet that = this\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tplus.runtime.getProperty(plus.runtime.appid, function(widgetInfo) { \r\n\t\t\t\t\tthat.currentversion = widgetInfo.version\r\n\t\t\t\t\tthat.versionname = widgetInfo.name\r\n\t\t\t\t\tthat.versioncode = widgetInfo.versionCode\r\n\t\t\t\t\tthat.updatebusiness(that)\r\n\t\t\t\t});  \r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif(this.h5preview){\r\n\t\t\t\t\tthis.updatebusiness(that)\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tupdatebusiness: function(that){ //具体升级的业务逻辑\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tmask: false\r\n\t\t\t\t});\r\n\t\t\t\tlet platform = uni.getSystemInfoSync().platform\r\n\t\t\t\tlet formdata = {\r\n\t\t\t\t\tmethod: \"upgrade\",\r\n\t\t\t\t\tversion: that.currentversion,  \r\n\t\t\t\t\tname: that.versionname,\r\n\t\t\t\t\tcode: that.versioncode,\r\n\t\t\t\t\tts:(new Date()).valueOf(),\r\n\t\t\t\t\ttransid:'123',\r\n\t\t\t\t\tsign:'123',\r\n\t\t\t\t\tplatform: platform\r\n\t\t\t\t}\r\n\t\t\t\tuni.request({  \r\n\t\t\t\t\turl: that.updateurl,  \r\n\t\t\t\t\t// data: formdata,\r\n\t\t\t\t\theader:{\r\n\t\t\t\t\t\tAuthorization:'Bearer' + uni.getStorageSync('token')\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (result) => {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tlet data = result.data\r\n\t\t\t\t\t\tif(data.code == 200){\r\n\t\t\t\t\t\t\tconsole.log('当前版本2',that.currentversion)\r\n\t\t\t\t\t\t\tconsole.log('获取升级2',data) \r\n\t\t\t\t\t\t\t//判断是否升级\r\n\t\t\t\t\t\t\tlet nowVersion = that.currentversion.replace(/\\./g,'')\r\n\t\t\t\t\t\t\tlet newVersion = data.data.version.replace(/\\./g,'')\r\n\t\t\t\t\t\t\tconsole.log('检查版本2',nowVersion,newVersion)\r\n\t\t\t\t\t\t\tlet update_flag = 0\r\n\t\t\t\t\t\t\tif( nowVersion < newVersion && nowVersion >= 111 ){\r\n\t\t\t\t\t\t\t\tconsole.log('需要升级')\r\n\t\t\t\t\t\t\t\tupdate_flag = 1\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//提示升级\r\n\t\t\t\t\t\t\tif(update_flag == 1){ //0不需要升级，1 需要升级\r\n\t\t\t\t\t\t\t\tthat.dshow = true //是否显示升级\r\n\t\t\t\t\t\t\t\tthat.update_tips = data.data.content //升级说明，不用我提醒大家换行应该用\\n 了吧？\r\n\t\t\t\t\t\t\t\tthat.forceupgrade =  1 //0不强制，1 强制升级（这个字段以后可能会优化到 update_flag 里）\r\n\t\t\t\t\t\t\t\tthat.version_url = data.data.downloadUrl //升级安装包或 appstore 地址，注意是全路径\r\n\t\t\t\t\t\t\t\t//that.currentversion = widgetInfo.version\r\n\t\t\t\t\t\t\t\tthat.updated2version = data.data.version //当前最新的版本。\r\n\t\t\t\t\t\t\t\tthat.wgt_flag = data.data.wgt_flag\r\n\t\t\t\t\t\t\t\tthat.wgt_url = data.data.wgt_url\r\n\t\t\t\t\t\t\t\tthat.size = data.data.size\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tif(that.noticeflag){\r\n\t\t\t\t\t\t\t\t\t//通知父组件，当前版为最新版本\r\n\t\t\t\t\t\t\t\t\tthat.$emit(\"showupdateTips\",0)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '请求升级出错：'+data.msg,\r\n\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}  \r\n\t\t\t\t});  \r\n\t\t\t},\r\n\t\t\t//点击开始升级按钮，开始升级\r\n\t\t\tupgrade_checked:function(){\r\n\t\t\t\tthis.update_flag = true\r\n\t\t\t\tthis.updateversion()\r\n\t\t\t},\r\n\t\t\t//点击取消升级按钮，取消升级\r\n\t\t\tupgrade_cancel:function(){\r\n\t\t\t\tthis.dshow = false\r\n\t\t\t},\r\n\t\t\t//升级过程中，点击中断升级按钮，中断升级\r\n\t\t\tupgrade_break: function(){\r\n\t\t\t\tthis.downloadTask.abort()\r\n\t\t\t\tthis.update_flag = false\r\n\t\t\t},\r\n\t\t\t//升级下载apk安装包的具体处理业务逻辑\r\n\t\t\tupdateversion: function(){\r\n\t\t\t\tlet platform = uni.getSystemInfoSync().platform\r\n\t\t\t\tlet that = this\r\n\t\t\t\tconsole.log(\"操作系统：\",platform)\r\n\t\t\t\tif(platform == 'ios' && this.appstoreflag){\r\n\t\t\t\t\t//如果启用ios appstore升级，则打开appstore\r\n\t\t\t\t\tthat.dshow = false\r\n\t\t\t\t\tconsole.log(\"跳转至appstore\")\r\n\t\t\t\t\tplus.runtime.launchApplication({\r\n\t\t\t\t\t    action: that.version_url\r\n\t\t\t\t\t}, function(e) {\r\n\t\t\t\t\t    uni.showToast({\r\n\t\t\t\t\t    \ttitle: '打开appstore失败',\r\n\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t    });\r\n\t\t\t\t\t});\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet that = this\r\n\t\t\t\t\tlet downloadurl = that.wgt_flag==1?that.wgt_url:that.version_url\r\n\t\t\t\t\tthis.update_confirm = true\r\n\t\t\t\t\tthis.downloadTask = uni.downloadFile({\r\n\t\t\t\t\t\turl: downloadurl,\r\n\t\t\t\t\t\tsuccess:function(res){\r\n\t\t\t\t\t\t\tif(res.statusCode == 200){\r\n\t\t\t\t\t\t\t\t//开始安装\r\n\t\t\t\t\t\t\t\tplus.runtime.install(res.tempFilePath, {\r\n\t\t\t\t\t\t\t\t\tforce: false  \r\n\t\t\t\t\t\t\t\t}, function() {  \r\n\t\t\t\t\t\t\t\t\tconsole.log('install success...');\r\n\t\t\t\t\t\t\t\t\tplus.runtime.restart();\r\n\t\t\t\t\t\t\t\t}, function(e) {  \r\n\t\t\t\t\t\t\t\t\tconsole.error('install fail...',e);  \r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '升级失败',\r\n\t\t\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});  \r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '下载失败，网络错误',\r\n\t\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail:function(e) {\r\n\t\t\t\t\t\t\tconsole.log(\"下载失败\",e)\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '下载失败:'+e.errMsg,\r\n\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.update_flag = false\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplete:function(){\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.downloadTask.onProgressUpdate(function(res){\r\n\t\t\t\t\t\tthat.update_process = res.progress\r\n\t\t\t\t\t\tif(res.progress == Infinity){\r\n\t\t\t\t\t\t\t//使用size计算\r\n\t\t\t\t\t\t\tconsole.log(\"计算size\");\r\n\t\t\t\t\t\t\tlet progress = (res.totalBytesWritten / that.size)*100\r\n\t\t\t\t\t\t\tif(progress>100){\r\n\t\t\t\t\t\t\t\tprogress = 100\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.update_process = progress\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t}\n</script>\n\n<style scoped>\r\n\t@import url(\"static/css/main.css\");\r\n\t.zy-upgrade-topbg-green {\r\n\t\tbackground-image: url('static/images/green.png');\r\n\t\tbackground-size: 100% 100%;\r\n\t\tbackground-repeat: no-repeat;\r\n\t\theight: 290rpx;\r\n\t}\r\n\t.zy-upgrade-topbg-red {\r\n\t\tbackground-image: url('static/images/red.png');\r\n\t\tbackground-size: 100% 100%;\r\n\t\tbackground-repeat: no-repeat;\r\n\t\theight: 290rpx;\r\n\t}\r\n\t.zy-upgrade-topbg-pink {\r\n\t\tbackground-image: url('static/images/pink.png');\r\n\t\tbackground-size: 100% 100%;\r\n\t\tbackground-repeat: no-repeat;\r\n\t\theight: 290rpx;\r\n\t}\r\n\t.zy-upgrade-topbg-yellow {\r\n\t\tbackground-image: url('static/images/yellow.png');\r\n\t\tbackground-size: 100% 100%;\r\n\t\tbackground-repeat: no-repeat;\r\n\t\theight: 290rpx;\r\n\t}\r\n\t.zy-upgrade-topbg-blue {\r\n\t\tbackground-image: url('static/images/blue.png');\r\n\t\tbackground-size: 100% 100%;\r\n\t\tbackground-repeat: no-repeat;\r\n\t\theight: 290rpx;\r\n\t}\r\n\t.zy-upgrade-title {\r\n\t\tfont-size: 50rpx;\r\n\t\tcolor: white;\r\n\t}\n</style>\n","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zy-upgrade.vue?vue&type=style&index=0&id=095821f8&scoped=true&lang=css&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./zy-upgrade.vue?vue&type=style&index=0&id=095821f8&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1625289644232\n      var cssReload = require(\"E:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}